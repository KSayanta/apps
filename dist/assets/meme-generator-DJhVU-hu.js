import{j as e,r as s,c as C}from"./component-BnOx5L_g.js";import{a as T}from"./utils-DoNsxxcT.js";const $="/app/troll-face.png";function S(){return e.jsxs("header",{className:"main-header",children:[e.jsx("img",{src:$,alt:""}),e.jsx("h1",{className:"heading",children:"Meme Generator"})]})}function X({caption:o,count:l,onChange:r}){const a=[];function n(t){const{value:u,name:m}=t.currentTarget;r(i=>({...i,[m]:u}))}for(let t=1;t<=l;t++)a.push(e.jsxs("label",{children:[e.jsxs("span",{children:[" Text ",t," "]}),e.jsx("input",{type:"text",maxLength:30,id:`text${t}`,name:`text${t}`,value:o[`text${t}`],onChange:n})]},`label${t}`));return a}const Y=({children:o,parentRef:l})=>{const[r,a]=s.useState(!1),[n,t]=s.useState(0),[u,m]=s.useState(0),[i,g]=s.useState({}),x=s.useRef(null);s.useEffect(()=>{const c=d=>{const h=l.current.getBoundingClientRect(),p=x.current.getBoundingClientRect(),w=n+d.clientX-i.x,M=u+d.clientY-i.y,b=0,v=0,E=h.width-p.width,R=h.height-p.height,N=Math.max(b,Math.min(E,w)),y=Math.max(v,Math.min(R,M));t(N),m(y)};return r&&window.addEventListener("mousemove",c),()=>window.removeEventListener("mousemove",c)},[r,i]),s.useEffect(()=>{const c=()=>a(!1);return window.addEventListener("mouseup",c),()=>window.removeEventListener("mouseup",c)},[]);const j=c=>{g({x:c.clientX,y:c.clientY}),a(!0)};return e.jsx("div",{ref:x,style:{position:"absolute",display:"inline-block",transform:`translate(${n}px,${u}px)`},onMouseDown:j,children:o})};function D({caption:o,count:l,parentRef:r}){const a=[];for(let n=1;n<=l;n++)a.push(e.jsx(Y,{parentRef:r,children:e.jsx("span",{className:"caption",children:o[`text${n}`]})},n+300));return a}let f=!1;function I(){const[o,l]=s.useState({}),[r,a]=s.useState({}),n=s.useRef(null);s.useEffect(()=>{f||(f=!0,t())},[]);function t(){T().then(u=>{let m={};for(let i=1;i<=u.box_count;i++)m[`text${i}`]="";l(u),a(m)})}return e.jsxs("main",{className:"wrapper wrapper__main",children:[e.jsxs("section",{className:"form",children:[e.jsx(X,{caption:r,count:o.box_count,onChange:a}),e.jsx("button",{className:"btn btn-cta","aria-label":"Get a new meme image",onClick:t,children:"New Meme ðŸ–¼"})]}),e.jsxs("section",{className:"meme",children:[e.jsx("img",{src:o.url}),e.jsx("div",{ref:n,className:"overlay",children:e.jsx(D,{parentRef:n,caption:r,count:o.box_count})})]})]})}function L(){return e.jsxs(e.Fragment,{children:[e.jsx(S,{}),e.jsx(I,{})]})}C.createRoot(document.getElementById("root")).render(e.jsx(s.StrictMode,{children:e.jsx(L,{})}));
